---
title: 인덱스
updated: 2023-01-19 06:28:15Z
created: 2023-01-19 05:57:35Z
latitude: 37.44491680
longitude: 127.13886840
altitude: 0.0000
sidebar: mydoc_sidebar1
permalink: Ⅰ.=프로그래밍=언어_03.=SQL_1.=ANSI=SQL_인덱스.html
folder: mydoc
---

## Index
- 검색기능 최적화를 위한 개념
  → 조건을 만족하는 데이터를 찾는다
- DML작업은 테이블과 인덱스를 같이 변경하기 때문에 오히려 느려질 수도 있다
<br>

## 트리기반 인덱스
- 일반적으로 B-트리 인덱스를 사용
  → Balance Tree = 자식노드가 2개 이상인 트리구조, 일치검색과 범위검색 모두에 적합하다
- 루프블록, 브랜치블록, 리프블록으로 구성
- `왼쪽 값보다 작거나 같으면 왼쪽이동 → 중간범위에 속하면 중앙이동 → 오른쪽 값보다 크면 오른쪽이동`을 반복탐색
- 동일컬럼 구성으로 인덱스를 중복 생성할 수 없으나, 컬럼 순서가 다르면 가능하다
  ex) index_AB, index_BA
- 그 외의 트리기반 인덱스로 비트맵, 리버스 키, 함수기반  인덱스 등이 존재한다

|이름|내용|
|--|--|
|루프 블록|가장 상위에 위치한 블록|
|브랜치 블록|분기목적, 다음 단계의 블록을 가리키는 포인터 소유|
|리프 블록|말단블록, 칼럼 데이터값, 행위치 레코드 식별자(RID), 양방향 링크 소유<br>인덱스 데이터는 칼럼 데이터값, RID 순서로 정렬된다<br>양방향 링크를 통하여 오름차순, 내림차순 정렬을 쉽게 할 수 있다|

![9d959b7a9a7ac3f4cfe4e8fa211e0a63.png](../../../resources/9d959b7a9a7ac3f4cfe4e8fa211e0a63.png)

<br>

## 클러스터형 인덱스
- 테이블 속의 데이터를 물리적으로 정렬하여 메모리에 저장하는 방식
  ex) 트리기반 클러스터 인덱스, 트리기반 비 클러스터 인덱스...
- 하나의 테이블에 한 개만 존재 (기본적으로 PK로 생성된다)
- 리프블록에 <abbr title="행 아이디">RID</abbr>가 존재하지 않는 대신 해당 행의 모든 컬럼값이 존재한다
- 비 클러스터형 보다 검색은 빠르지만 데이터 수정은 느리다

![29843732ba15c81ceaacd84c1487bc50.png](../../../resources/29843732ba15c81ceaacd84c1487bc50.png)

<br>

## FULL SCAN
- 전체 테이블 스캔
- 테이블의 모든 데이터를 읽으면서 조건에 맞는 결과만 추출하는 방식
- 스캔 과정 중 읽어낸 블록들은 재사용성이 떨어지기 때문에 메모리에서 곧 제거될 수 있도록 관리된다
- 한 번의 I/O 요청에 여러 블록을 한 번에 읽는다
- 아래의 경우 전체 테이블 스캔이 실행된다

|이름|내용|
|--|--|
|SQL문에 조건이 존재하지 않는 경우|모든 데이터가 답이 되기 때문에 전부 추출|
|사용 가능한 인덱스가 없는 경우|인덱스가 없어서 전체 스캔|
|함수를 사용하여 컬럼 변형한 경우|인덱스 컬럼을 변형한 경우 인덱스 사용 불가|
|옵티마이저의 취사 선택|테이블의 대부분의 블록에 액세스해야 한다고 판단한 경우 인덱스 사용 안할 수 있음|
|병렬처리 방식으로 처리하는 경우|대량의 데이터 병렬처리시 전체 스캔이 더 높은 성능을 보일수 있다|
|전체 스캔 힌트를 사용하는 경우|옵티마이저에 직접 지시하는 전체 스캔 힌트를 사용|

<br>

## INDEX SCAN
- 인덱스 스캔
- 인덱스를 구성하는 컬럼의 값을 기반을 데이터를 추출하는 방식
- 인덱스에는 컬럼의 데이터 값과 RID가 존재하며, 필요한 데이터를 인덱스에서 추출하면 RID로 테이블에 접근하지 않는다
- 인덱스는 컬럼A → 컬럼B → RID 순서로 정렬되며, 인덱스를 사용한 결과집합 또한 마찬가지로 정렬된다
- 한 번의 I/O 요청으로 한 블록씩(RID) 데이터를 읽는다

|이름|내용|
|--|--|
|인덱스 유일 스캔|중복되지 않는 유일 인덱스를 이용하여 1개의 데이터만 추출하는 방식|
|인덱스 범위 스캔|1개 이상의 데이터를 추출하는 방식<br>유일 인덱스로 일치검색 하지 않는 경우, 비유일 인덱스 사용|
|인덱스 역순 범위 스캔|인덱스 리프 블록의 양방향 링크를 이용하여 내림차순으로 데이터를 읽는 방식<br>Max값 찾기 쉬움|
