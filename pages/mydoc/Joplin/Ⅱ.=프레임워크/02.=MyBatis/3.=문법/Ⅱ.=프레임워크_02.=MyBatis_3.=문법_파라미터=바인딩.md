---
title: 파라미터 바인딩
updated: 2023-01-06 07:49:19Z
created: 2022-12-14 08:38:50Z
latitude: 37.26357270
longitude: 127.02860090
altitude: 0.0000
sidebar: mydoc_sidebar2
permalink: Ⅱ.=프레임워크_02.=MyBatis_3.=문법_파라미터=바인딩.html
folder: mydoc
---

## #{...}
- 파라미터가 String 형식으로 들어와 자동적으로 ' ' 이 붙는다.
- jdbcType=VARCHAR 속성붙으면 null 허용.
- WHERE절이나 INSERT, UPDATE에 데이터값을 동적으로 넣을때 사용
- 사용시 <ins>PreparedStatement</ins> 생성
```sql
SELECT	USER_ID, USER_NM
FROM	TEST_TABLE
WHERE	1=1
AND	USER_ID = #{USER_ID}
AND	USER_NM = #{USER_NM}
```
<br>

## ${...}
- 파라미터가 해당 컬럼의 자료형에 맞춰서 변형된다 (보안취약) 
- 테이블이나 컬럼명, ORDER BY절을 동적으로 지정해야 할 때 사용
- 사용시 <ins>Statement</ins> 생성

```sql
SELECT	USER_ID, USER_NM
FROM	TEST_TABLE
WHERE	1=1
AND	USER_ID = ${USER_ID}
AND	USER_NM = ${USER_NM}
```

<br>

## 동적 사용

```sql
--          START_DATE | END_DATE | NAME
--      1 |    01-01   |   01-30  | MONTH_1
--      2 |    02-01   |   02-30  | MONTH_2
--
-- 동적으로 컬럼명을 설정할때, 문자열로 컬럼명 받아와지면 에러가 발생
SELECT T.T_COL, T.${bucket.NAME}
FROM (
 SELECT 'T' AS T_COL
 , SUM(CASE WHEN M.BUCKET_DATE BETWEEN #{bucket.START_DATE} AND #{bucket.END_DATE} THEN M.QTY ELSE 0 END) AS ${bucket.NAME}
 FROM TEST_TABLE
) T
```

---
**Statement / PreparedStatement** = 공통적으로 SQL문을 실행할 수 있는 객체
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Statement는 SQL수행시 매번 컴파일을 하기 때문에 성능상 이슈 발생
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Prepared는 컴파일이 미리 되어있기 때문에 성능이 좋음 (변수 부분만 변경되며 구문분석 하여 특수문자에 안전)
