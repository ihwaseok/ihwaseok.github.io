---
title: 9. Controller에서 Rest.java파일 생성
updated: 2022-12-13 08:03:36Z
created: 2022-12-08 06:34:10Z
latitude: 37.26357270
longitude: 127.02860090
altitude: 0.0000
---

## Controller에서 ~RestController.java 파일 생성
- class명 위에 @RestController 어노테이션 추가
- @Autowired 어노테이션으로 ~Service 주입
- @PostMapping("ajax로 받아들일 url") 어노테이션을 추가하여 TestResponse<AUIGridSet<Map<String, Object>>> 메소드 정의
- 헤더생성 메소드를 이용하여 헤더 생성 (해당 메소드는 밑에서 정의)
- 주입한 service를 이용하여 데이터리스트 생성 (List<Map<String, Object>> 타입)
- 생성한 헤더와 데이터리스트를 이용하여 AUIGridSet<Map<String, Object>> 타입의 gridset 생성
- return new TestResponse<>(JsonStatus.SUCCESS.getValue(), gridset);
<br>

## 그리드 정의
- AUIHeader 타입의 헤더생성 메소드 정의 (AUI그리드 사용시)
- List<AUIColumn> auiCols = new ArrayList<>() 추가
- auiCols.add(new AUIColumnBuilder("DB칼럼명","그리드 칼럼명", "text", 80).build()) 추가
- (text 대신에 numeric 가능, 80을 변경하여 칼럼길이 조정, .build()앞에 다른메소드를 이용하여 속성정의)
- return new AUIHeader(auiCols, 0) (0은 고정할 셀의 개수)
<br>

```java
@RestController
public class TestRestController extends TestCommonController {

	@Autowired
	private TestService testService;

	// html에서 ajax를 이용하여 아래의 url에 매핑된 메소드에 접근
	@PostMapping("/program/module_1/testtable/r")
	public TestResponse<AUIGridSet<Map<String, Object>>> testTableList(@RequestBody List<TestTableDto> props) throws Exception {
		// 컬럼 설정
		AUIHeader header = makeTestTableColumns(props);
		// DB에서 가져온 데이터리스트 설정
		List<Map<String, Object>> dataList = testService.getTestTableList(props);
		
		AUIGridSet<Map<String, Object>> gs = new AUIGridSet<>("Page Title", header, dataList);
		return new TestResponse<>("Success", gs);
	}

	private AUIHeader makeTestTableColumns(PageCriteria<?> pageCriteria) throws Exception {
		// 컬럼 생성
		List<AUIColumn> auiCols = new ArrayList<>();
		auiCols.add(new AUIColumnBuilder("colAlpha",	"컬럼1",	"text", 100).build());
		auiCols.add(new AUIColumnBuilder("colBeta",	"컬럼2",	"text", 100).build());
		auiCols.add(new AUIColumnBuilder("testCol",	"컬럼3",	"text", 150).build());
		
		return new AUIHeader(auiCols, 6);
	}
}
```
